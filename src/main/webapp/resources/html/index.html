<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>进入  LIVE 世界</title>
	<script type="text/javascript" src="../js/inspiniaCommon.js"></script>
</head>

<body>
    <div id="wrapper">
        <nav class="navbar-default navbar-static-side" role="navigation">
            <div class="sidebar-collapse">
                <ul class="nav metismenu" id="side-menu">
                    <li class="nav-header">
                        <div class="dropdown profile-element"> <span>
                            <img id="headPicture" alt="image" class="img-circle" src="../inspinia/img/profile_small.jpg" />
                             </span>
                            <a data-toggle="dropdown" class="dropdown-toggle" href="index.html#">
                            <span class="clear"> <span class="block m-t-xs" id="nickName"> <strong  class="font-bold">David Williams</strong>
                             </span> <span class="text-muted text-xs block" id="noticeText">Art Director <b class="caret"></b></span> </span> </a>
                            <ul class="dropdown-menu animated fadeInRight m-t-xs">
                                <li><a href="profile.html">Profile</a></li>
                                <li><a href="contacts.html">Contacts</a></li>
                                <li><a href="mailbox.html">Mailbox</a></li>
                                <li class="divider"></li>
                                <li><a href="login.html">Logout</a></li>
                            </ul>
                        </div>
                        <div class="logo-element">
                            IN+
                        </div>
                    </li>
                <!--   <li class="active">
                        <a href="index.html"><i class="fa fa-th-large"></i> <span class="nav-label">Dashboards</span> <span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li class="active"><a href="empView.html">Dashboard v.1</a></li>
                            <li><a href="dashboard_2.html">Dashboard v.2</a></li>
                            <li><a href="dashboard_3.html">Dashboard v.3</a></li>
                            <li><a href="dashboard_4_1.html">Dashboard v.4</a></li>
                            <li><a href="dashboard_5.html">Dashboard v.5 <span class="label label-primary pull-right">NEW</span></a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="layouts.html"><i class="fa fa-diamond"></i> <span class="nav-label">Layouts</span><span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level">
                            <li class="active"><a href="index.html">Dashboard v.1</a></li>
                            <li><a href="dashboard_2.html"><span class="nav-label">Dashboard v.2</span><span class="fa arrow"></span></a>
                            	<ul class="nav nav-third-level">
		                            <li class="active"><a href="index.html">Dashboard v.1</a></li>
		                            <li><a href="dashboard_2.html">Dashboard v.2</a></li>
		                            <li><a href="dashboard_3.html">Dashboard v.3</a></li>
		                            <li><a href="dashboard_4_1.html">Dashboard v.4</a></li>
		                            <li><a href="dashboard_5.html">Dashboard v.5 <span class="label label-primary pull-right">NEW</span></a></li>
		                        </ul>
                            </li>
                            <li><a href="dashboard_3.html">Dashboard v.3</a></li>
                            <li><a href="dashboard_4_1.html">Dashboard v.4</a></li>
                            <li><a href="dashboard_5.html">Dashboard v.5 <span class="label label-primary pull-right">NEW</span></a></li>
                        </ul>
                    </li> -->
                    
                </ul>

            </div>
        </nav>

        <div id="page-wrapper" class="gray-bg dashbard-1">
	        <div class="row border-bottom">
		        <nav class="navbar navbar-static-top" role="navigation" style="margin-bottom: 0">
			        <div class="navbar-header">
			            <a class="navbar-minimalize minimalize-styl-2 btn btn-primary " href="index.html#"><i class="fa fa-bars"></i> </a>
			            <form role="search" class="navbar-form-custom" action="search_results.html">
			                <div class="form-group">
			                    <input type="text" placeholder="Search for something..." class="form-control" name="top-search" id="top-search">
			                </div>
			            </form>
			        </div>
		            <ul class="nav navbar-top-links navbar-right">
		                <li>
		                    <span class="m-r-sm text-muted welcome-message">Welcome to INSPINIA+ Admin Theme.</span>
		                </li>
		                <li class="dropdown">
		                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="index.html#">
		                        <i class="fa fa-envelope"></i>  <span class="label label-warning">16</span>
		                    </a>
		                    <ul class="dropdown-menu dropdown-messages">
		                        <li>
		                            <div class="dropdown-messages-box">
		                                <a href="profile.html" class="pull-left">
		                                    <img alt="image" class="img-circle" src="img/a7.jpg">
		                                </a>
		                                <div class="media-body">
		                                    <small class="pull-right">46h ago</small>
		                                    <strong>Mike Loreipsum</strong> started following <strong>Monica Smith</strong>. <br>
		                                    <small class="text-muted">3 days ago at 7:58 pm - 10.06.2014</small>
		                                </div>
		                            </div>
		                        </li>
		                        <li class="divider"></li>
		                        <li>
		                            <div class="dropdown-messages-box">
		                                <a href="profile.html" class="pull-left">
		                                    <img alt="image" class="img-circle" src="img/a4.jpg">
		                                </a>
		                                <div class="media-body ">
		                                    <small class="pull-right text-navy">5h ago</small>
		                                    <strong>Chris Johnatan Overtunk</strong> started following <strong>Monica Smith</strong>. <br>
		                                    <small class="text-muted">Yesterday 1:21 pm - 11.06.2014</small>
		                                </div>
		                            </div>
		                        </li>
		                        <li class="divider"></li>
		                        <li>
		                            <div class="dropdown-messages-box">
		                                <a href="profile.html" class="pull-left">
		                                    <img alt="image" class="img-circle" src="img/profile.jpg">
		                                </a>
		                                <div class="media-body ">
		                                    <small class="pull-right">23h ago</small>
		                                    <strong>Monica Smith</strong> love <strong>Kim Smith</strong>. <br>
		                                    <small class="text-muted">2 days ago at 2:30 am - 11.06.2014</small>
		                                </div>
		                            </div>
		                        </li>
		                        <li class="divider"></li>
		                        <li>
		                            <div class="text-center link-block">
		                                <a href="mailbox.html">
		                                    <i class="fa fa-envelope"></i> <strong>Read All Messages</strong>
		                                </a>
		                            </div>
		                        </li>
		                    </ul>
		                </li>
		                <li class="dropdown">
		                    <a class="dropdown-toggle count-info" data-toggle="dropdown" href="index.html#">
		                        <i class="fa fa-bell"></i>  <span class="label label-primary">8</span>
		                    </a>
		                    <ul class="dropdown-menu dropdown-alerts">
		                        <li>
		                            <a href="mailbox.html">
		                                <div>
		                                    <i class="fa fa-envelope fa-fw"></i> You have 16 messages
		                                    <span class="pull-right text-muted small">4 minutes ago</span>
		                                </div>
		                            </a>
		                        </li>
		                        <li class="divider"></li>
		                        <li>
		                            <a href="profile.html">
		                                <div>
		                                    <i class="fa fa-twitter fa-fw"></i> 3 New Followers
		                                    <span class="pull-right text-muted small">12 minutes ago</span>
		                                </div>
		                            </a>
		                        </li>
		                        <li class="divider"></li>
		                        <li>
		                            <a href="grid_options.html">
		                                <div>
		                                    <i class="fa fa-upload fa-fw"></i> Server Rebooted
		                                    <span class="pull-right text-muted small">4 minutes ago</span>
		                                </div>
		                            </a>
		                        </li>
		                        <li class="divider"></li>
		                        <li>
		                            <div class="text-center link-block">
		                                <a href="notifications.html">
		                                    <strong>See All Alerts</strong>
		                                    <i class="fa fa-angle-right"></i>
		                                </a>
		                            </div>
		                        </li>
		                    </ul>
		                </li>
		
		
		                <li>
		                    <a href="login.html">
		                        <i class="fa fa-sign-out"></i> Log out
		                    </a>
		                </li>
		                <li>
		                    <a class="right-sidebar-toggle">
		                        <i class="fa fa-tasks"></i>
		                    </a>
		                </li>
		            </ul>
		        </nav>
	        </div>
	        <div class="row  border-bottom white-bg dashboard-header">
                <div class="col-sm-12">
                	这里算是导航图片吧
                </div>
	        </div>
	        <div class="row">
	            <div class="col-lg-12">
	            	<iframe id="iframe-page-content" src="https://www.baidu.com" width="100%"  frameborder="no" border="0" marginwidth="0"

					marginheight=" 0"  allowtransparency="yes" height="500px"></iframe>
	                <div class="footer">
	                    <div class="pull-right">
	                        10GB of <strong>250GB</strong> Free.
	                    </div>
	                    <div>
	                        <strong>Copyright</strong> Example Company &copy; 2014-2015
	                    </div>
	                </div>
	            </div>
	        </div>
        </div>
        
    </div>



    <script>
        $(document).ready(function() {
        	var windowHeight = document.body.clientHeight;
        	var frameHeight = windowHeight-120;
        	/*设置iframe的高度*/
        	$('#iframe-page-content').css('min-height',frameHeight);
            setTimeout(function() {
                toastr.options = {
                    closeButton: true,
                    progressBar: true,
                    showMethod: 'slideDown',
                    timeOut: 4000
                };
                toastr.success('Responsive Admin Theme', 'Welcome to INSPINIA');

            }, 1300);
			
            initData();
            
        });
        
        /**
         * 初始化数据
         */
        function initData(){
          	getUserInfo();
          	getMenuByLevel();
//      	aaaaaa();
        }
        
        function aaaaaa(){
        	$.ajax({
				url: '/live/getMenuByLevel',
				type: 'POST',
				data: {
					level : '1',
					parentId : '0'
				},
				dataType: 'json',
				success: function(resp){
					console.log(resp);
					var status = resp.status;
					if(status == '00'){
						var menu = document.getElementById('side-menu');//左侧menu菜单栏
						var _html = '';
						var li = document.createElement('li');
						_html += '<a href="#"><i class="fa fa-th-large"></i> <span class="nav-label">Dashboards</span> <span class="fa arrow"></span></a>';
						_html += '<ul class="nav nav-second-level">';
						_html += '<li class="active"><a href="empView.html">Dashboard v.1</a></li>';
						_html += '<li><a href="dashboard_2.html">Dashboard v.2</a></li>';
						_html += '<li><a href="dashboard_3.html">Dashboard v.3</a></li>';
						_html += '<li><a href="dashboard_4_1.html">Dashboard v.4</a></li>';
						_html += '<li><a href="dashboard_5.html">Dashboard v.5 <span class="label label-primary pull-right">NEW</span></a></li>';
						_html += '</ul>';
						_html += '</li>';
						li.innerHTML = _html;
						menu.appendChild(li);
					}else{
						$.Pop('网络连接出错或服务端未开启!','alert',function(){});
					}
				},
				error: function(a, b, c){
					alert(JSON.parse(a)+"--"+b+"--"+c);
				}
			});
        }
        
        /**
         * 目前只获取 一级菜单
        * 根据【等级】、【父节点ID】值获取所有菜单元素值
        * @param {Object} level		等级值
        * @param {Object} parentId	父节点ID
        */
        function getMenuByLevel(level,parentId){
        	level = isEmpty(level) ? '1' : level;			//默认1级菜单
        	parentId = isEmpty(parentId) ? '0' : parentId;	//根节点parentId为0
        	$.ajax({
				url: '/live/getMenuByLevel',
				type: 'POST',
				data: {
					level : level,
					parentId : parentId
				},
				dataType: 'json',
				success: function(resp){
					console.log(resp);
					var status = resp.status;
					if(status == '00'){
						var menu = document.getElementById('side-menu');//左侧menu菜单栏
						var data = resp.data;
						
						if(data.length >0){
							var iconNum = 0;
							for(var i=0; i<data.length;i++){
								var li = document.createElement('li');
								if(i == 0){
									li.className = 'active menuLi';
								}else{
									li.className = 'menuLi';
								}
								if(iconNum >= menu_icons.length){
									iconNum = 0;
								}
								li.setAttribute('data-url',''+data[i].mocFuncId+'');
								var _html = '';
								_html += '<a class="isLeaf" href="#"><i class="'+menu_icons[iconNum]+'"></i> <span class="nav-label">'+data[i].name+'</span>';
								var leafFlag = data[i].leafFlag;
								_html += '</a></li>';
								
								li.innerHTML = _html;
								menu.appendChild(li);
								
								/**
								 * 添加菜单点击事件
								 */
								$('#side-menu').off('click','.menuLi');
								$('#side-menu').on('click','.menuLi',function(event){
									$('.menuLi').removeClass('active');//移除所有active效果
									$(this).addClass('active');
									var subUrl = this.getAttribute('data-url');
									showSubPage('iframe-page-content', subUrl);
								});
								iconNum++;
								
								
							}
						}
					}else{
						$.Pop('网络连接出错或服务端未开启!','alert',function(){});
					}
				},
				error: function(a, b, c){
					alert(JSON.parse(a)+"--"+b+"--"+c);
				}
			});
        }
        
       
       	/**
       	 * 根据 页面 url  展示到对应 iframe中
       	 * @param {Object} frameId		对应iframeId
       	 * @param {Object} pageUrl		页面url
       	 */
        function showSubPage(frameId,pageUrl){
        	var subFrame = document.getElementById(frameId);
        	subFrame.src = htmlFramePath + pageUrl;
        }
        
        /**
         * 初始化菜单栏数据
         */
        function initTreeMenu(){
       		$.ajax({
				url: '/live/getTreeMenu',
				type: 'POST',
				data: {},
				dataType: 'json',
				success: function(resp){
					var status = resp.status;
					if(status == '00'){
						var data = resp.data;
						
					}else{
						$.Pop('用户名或密码错误，不能登录！','alert',function(){});
					}
				},
				error: function(a, b, c){
					alert(JSON.parse(a)+"--"+b+"--"+c);
				}
			});
        }
        
        /**
         * 获取用户信息
         */
        function getUserInfo(){
        	var userId = window.localStorage.getItem('userId');
        	if(!isEmpty(userId)){
        		$.ajax({
					url: '/live/getUserInfo',
					type: 'POST',
					data: {
						userId : userId
					},
					dataType: 'json',
					success: function(resp){
						var status = resp.status;
						if(status == '00'){
							var data = resp.data;
							var imgSrc = data.headPic;
							var headPicDom = document.getElementById("headPicture");
							headPicDom.src='../imgs/'+imgSrc;
							var nickName = document.getElementById("nickName");
							nickName.innerText = data.name;
							var noticeText = document.getElementById("noticeText");
							noticeText.innerHTML = data.notice+'<b class="caret"></b>';
						}else{
							$.Pop('用户名或密码错误，不能登录！','alert',function(){});
						}
					},
					error: function(a, b, c){
						alert(JSON.parse(a)+"--"+b+"--"+c);
					}
				});
        	}
        }
        
    </script>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-4625583-2', 'webapplayers.com');
        ga('send', 'pageview');

    </script>
</body>
</html>
